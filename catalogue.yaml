- name: configure catalogue
  hosts: catalogue
  tasks:
   - name: enable nodejs:20
     ansible.builtin.command: dnf module enable nodejs:20 -y

   - name: install nodejs
     ansible.builtin.dnf:
       name: nodejs
       state: present  

   - name: create user
     ansible.builtin.user:
       name: roboshop
       system: true
       home: /app
       shell: /sbin/nologin  
       comment: "roboshop system user"

   - name: creating a directory
     ansible.builtin.file:
        path: /app
        state: directory

   - name: delete catalogue zip file  ####### for avoiding every time downloading a zip file  ###############
     ansible.builtin.file:
        path: /tmp/catalogue.zip
        state: absent    

   - name: downloading catalogue
     ansible.builtin.get_url:
       url: https://roboshop-artifacts.s3.amazonaws.com/catalogue-v3.zip 
       dest: /tmp/catalogue.zip

   - name: unarchieve a file
     ansible.builtin.unarchive:
       src: /tmp/catalogue.zip
       dest: /app
       remote_src: yes

